# 7z辅助工具

* 7zdir: 参数为`7zdir xxx yyy ...`。将多个目录压缩为`xxx.7z`，`yyy.7z`等，随后删除目录。
* 7ztocmx: 将7z漫画压缩包转换为zip+jpeg格式。

# 压缩+加密机制

目录会首先被7z分卷加密压缩，成为多个7z压缩包。压缩包所用密码会由gpg加密存放在`key.gpg`文件中。总体文件呈现以下结构。

* {name}.7z.001
* {name}.7z.002
* ...
* {name}.7z.key.gpg

如果文件小于2G则只有`{name}.7z`文件存在。

这套机制对应以下几个脚本。

* 7zenc: 参数为`7zenc {name}.7z ...`。会自动生成`{name}.7z.key.gpg`文件，或自动从该文件中解密出密码。随后将后续参数中的内容添加到对应7z压缩包中。
* 7zdes: 参数为`7zdes {cmd} {name}.7z ...`。会自动读取`{name}.7z.key.gpg`文件，解密出密码。随后调用7z操作目标文件。可以解压或列目录。
* un7zd: 参数为`un7zd {name}.7z`。自动解密。随后生成`{name}`目录，并且将文件内容解压到该目录。

# 目录签署机制

`gpg-sign-dir`用于签署目录。对于任何内容的目录，该脚本列出当前目录下所有文件，排序，计算sha256校验，并生成`SHA256SUM`文件。随后签署生成`SHA256SUM.asc`文件。

该文件可以通过`gpg --verify`校验，也可通过`sha256sum -c`校验目录中其他内容。
